{"version":3,"sources":["webpack://lib/C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/symbols/support/previewSymbol2D.js"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACuU,oKAAoK,gBAAgB,gCAAgC,wIAAwI,2BAA2B,cAAc,yBAAyB,eAAe,QAAQ,kEAAC,oBAAoB,oBAAoB,kBAAkB,oBAAoB,uBAAuB,uBAAuB,sBAAsB,uBAAuB,qBAAqB,gBAAgB,QAAQ,sCAAsC,kEAAC,iDAAiD,kEAAC,6IAA6I,4DAAC,IAAI,MAAM,8DAAC,IAAI,UAAU,4BAA4B,iDAAC,IAAI,oCAAoC,0BAA0B,EAAE,SAAS,4CAA4C,oDAAoD,wCAAwC,uFAAuF,eAAe,QAAQ,qCAAqC,kEAAC,eAAe,kBAAkB,sBAAsB,+BAA+B,gBAAgB,MAAM,qBAAqB,mBAAmB,4BAA4B,EAAE,4BAA4B,EAAE,4BAA4B,EAAE,4BAA4B,GAAG,MAAM,uBAAuB,mBAAmB,4BAA4B,EAAE,4BAA4B,EAAE,4BAA4B,EAAE,4BAA4B,EAAE,sBAAsB,EAAE,gBAAgB,MAAM,sBAAsB,mBAAmB,yBAAyB,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,sBAAsB,EAAE,0BAA0B,MAAM,wBAAwB,mBAAmB,4BAA4B,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,sBAAsB,EAAE,0BAA0B,MAAM,iBAAiB,mBAAmB,yBAAyB,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,WAAW,MAAM,oBAAoB,4BAA4B,+BAA+B,MAAM,QAAQ,+CAA+C,2BAA2B,mBAAmB,yBAAyB,EAAE,yBAAyB,GAAG,MAAM,oJAAoJ,uDAAC,eAAe,uDAAC,SAAS,MAAM,QAAQ,MAAM,kEAAC,YAAY,kEAAC,WAAW,4BAA4B,mHAAmH,kFAAkF,WAAW,MAAM,QAAQ,oDAAoD,kEAAC,sBAAsB,uCAAuC,8BAA8B,YAAY,gCAAgC,mBAAmB,yGAAyG,YAAY,8EAA8E,OAAO,sCAAsC,sDAAC,gEAAgE,oBAAoB,WAAW,8CAA8C,2EAAC,gGAAgG,cAAc,kGAAkG,aAAa,YAAY,wBAAwB,8EAAC,QAAQ,YAAY,uBAAuB,8EAAC,OAAO,UAAU,OAAO,oEAAC,UAAU,8DAA8D,EAAE,GAAgC","file":"179.render-page.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../core/Error.js\";import{pt2px as a,px2pt as l}from\"../../core/screenUtils.js\";import{getFill as n,getStroke as o,getPatternUrlWithColor as s}from\"./gfxUtils.js\";import{shapes as i,adjustColorBrightness as r}from\"./previewUtils.js\";import{renderSymbol as c}from\"./renderUtils.js\";const m=\"picture-fill\",u=\"picture-marker\",p=\"simple-fill\",h=\"simple-line\",d=\"simple-marker\",f=\"text\",v=\"Aa\",y=22,g=120,w=80,M=40,b=document.createElement(\"canvas\");function x(e,t){const a=b.getContext(\"2d\"),l=[];return t&&(t.weight&&l.push(t.weight),t.size&&l.push(t.size+\"px\"),t.family&&l.push(t.family)),a.font=l.join(\" \"),a.measureText(e).width}const k=7.2/2.54,L=72/2.54;function z(e){if(0===e.length)return 0;if(e.length>2){const t=l(1),a=parseFloat(e);switch(e.slice(-2)){case\"px\":return a;case\"pt\":return a*t;case\"in\":return 72*a*t;case\"pc\":return 12*a*t;case\"mm\":return a*k*t;case\"cm\":return a*L*t}}return parseFloat(e)}function j(l,b){var k,L;const j=null!=(null==b?void 0:b.size)?a(b.size):null,C=null!=(null==b?void 0:b.maxSize)?a(b.maxSize):null,F=null!=(null==b?void 0:b.opacity)?b.opacity:null,S=null!=(null==b?void 0:b.rotation)?b.rotation:\"angle\"in l?l.angle:null,E=n(l);let P=o(l);if(E&&!P){const t=\"type\"in E?null:new e(E);\"#ffffff\"===(t?t.toHex():null)&&(P={color:\"#bdc3c7\",width:.75})}const U={shape:null,fill:null,stroke:P,offset:[0,0]};null!=(k=P)&&k.width&&(P.width=Math.min(P.width,w));const q=(null==(L=P)?void 0:L.width)||0;let Z=null!=j&&(null==(null==b?void 0:b.scale)||(null==b?void 0:b.scale)),H=0,T=0,A=!1;switch(l.type){case d:{const e=l.style,t=Math.min(null!=j?j:a(l.size),C||g);switch(H=t,T=t,e){case\"circle\":U.shape={type:\"circle\",cx:0,cy:0,r:.5*t},Z||(H+=q,T+=q);break;case\"cross\":U.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*T]},{command:\"L\",values:[H,.5*T]},{command:\"M\",values:[.5*H,0]},{command:\"L\",values:[.5*H,T]}]};break;case\"diamond\":U.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*T]},{command:\"L\",values:[.5*H,0]},{command:\"L\",values:[H,.5*T]},{command:\"L\",values:[.5*H,T]},{command:\"Z\",values:[]}]},Z||(H+=q,T+=q);break;case\"square\":U.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[H,0]},{command:\"L\",values:[H,T]},{command:\"L\",values:[0,T]},{command:\"Z\",values:[]}]},Z||(H+=q,T+=q),S&&(A=!0);break;case\"triangle\":U.shape={type:\"path\",path:[{command:\"M\",values:[.5*H,0]},{command:\"L\",values:[H,T]},{command:\"L\",values:[0,T]},{command:\"Z\",values:[]}]},Z||(H+=q,T+=q),S&&(A=!0);break;case\"x\":U.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[H,T]},{command:\"M\",values:[H,0]},{command:\"L\",values:[0,T]}]},S&&(A=!0);break;case\"path\":U.shape={type:\"path\",path:l.path||\"\"},Z||(H+=q,T+=q),S&&(A=!0),Z=!0}break}case h:{const e=Math.min(null!=j?j:q,C||w),t=e>y?2*e:M;P.width=e,H=t,T=e,U.shape={type:\"path\",path:[{command:\"M\",values:[0,T]},{command:\"L\",values:[H,T]}]};break}case m:case p:H=Math.min(null!=j?j:y,C||g)+q,T=H,Z=!0,U.shape=\"object\"==typeof(null==b?void 0:b.symbolConfig)&&null!=b&&b.symbolConfig.isSquareFill?i.squareFill[0]:i.fill[0];break;case u:{let e=a(l.width),t=a(l.height);const n=Math.max(e,t),o=e/t;e=o<=1?Math.ceil(n*o):n,t=o<=1?n:Math.ceil(n/o),H=Math.min(null!=j?j:e,C||g),T=Math.min(null!=j?j:t,C||g),U.shape={type:\"image\",x:-Math.round(H/2),y:-Math.round(T/2),width:H,height:T,src:l.url||\"\"},S&&(A=!0);break}case f:{const e=l,t=e.text||v,n=e.font,o=Math.min(null!=j?j:a(n.size),C||g),s=x(t,{weight:n.weight,size:o,family:n.family}),i=/[\\uE600-\\uE6FF]/.test(t);H=i?o:s,T=o;let r=.25*z((n?o:0).toString());i&&(r+=5),U.shape={type:\"text\",text:t,x:0,y:r,align:\"middle\",decoration:n&&n.decoration,rotated:e.rotated,kerning:e.kerning},U.font=n&&{size:o,style:n.style,decoration:n.decoration,weight:n.weight,family:n.family};break}}if(!U.shape)return Promise.reject(new t(\"symbolPreview: renderPreviewHTML2D\",\"symbol not supported.\"));const D=E,R=l.color;let B=null;return D&&\"pattern\"===D.type&&R&&l.type!==m?B=s(D.src,R.toCss(!0)).then((e=>(D.src=e,U.fill=D,U))):(U.fill=E,B=Promise.resolve(U)),B.then((e=>{const t=[[e]];if(\"object\"==typeof(null==b?void 0:b.symbolConfig)&&null!=b&&b.symbolConfig.applyColorModulation){const a=.6*H;t.unshift([{...e,offset:[-a,0],fill:r(E,-.3)}]),t.push([{...e,offset:[a,0],fill:r(E,.3)}]),H+=2*a}return c(t,[H,T],{node:b&&b.node,scale:Z,opacity:F,rotation:S,useRotationSize:A})}))}export{j as previewSymbol2D};\n"],"sourceRoot":""}