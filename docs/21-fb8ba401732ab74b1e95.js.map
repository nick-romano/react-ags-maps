{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/GroupLayer.js"],"names":["_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","m","_n","_super","i","_this","_visibilityHandles","fullExtent","operationalLayerType","spatialReference","type","_visibilityWatcher","bind","key","value","_enforceVisibility","visibilityMode","visible","watch","_visibleWatcher","s","r","o","forEach","webmap","getLayerJSONFromResourceInfo","layerType","push","layers","set","_set","_get","addResolvingPromise","loadFromPortal","supportedTypes","Promise","resolve","_this2","_turnOffOtherLayers","uid","remove","initialized","t","find","length","getItemAt","_isAnyLayerVisible","some","json","read","write","ignoreOrigin","origins","readOnly","u"],"mappings":"8FAAA,qTAOA,SAASA,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhFC,QAAQC,UAAUC,QAAQC,KAAKP,QAAQC,UAAUG,QAAS,IAAI,iBAAyB,EAAQ,MAAOI,GAAK,OAAO,GAF9PC,GAA6B,OAAO,WAAkC,IAAsCC,EAAlCC,EAAQ,YAAgBb,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,EAAY,YAAgBC,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOI,UAAWH,QAAqBF,EAASC,EAAMK,MAAMH,KAAME,WAAc,OAAO,YAA2BF,KAAMH,IA4B5Z,IAAIO,EAAiB,SAAUC,GAC7B,YAAUD,EAAGC,GAEb,IAAIC,EAAStB,EAAaoB,GAE1B,SAASA,EAAEG,GACT,IAAIC,EAKJ,OAHA,YAAgBR,KAAMI,IAEtBI,EAAQF,EAAOZ,KAAKM,KAAMO,IAAUE,mBAAqB,GAAID,EAAME,gBAAa,EAAQF,EAAMG,qBAAuB,aAAcH,EAAMI,sBAAmB,EAAQJ,EAAMK,KAAO,QAASL,EAAMM,mBAAqBN,EAAMM,mBAAmBC,KAAK,YAAuBP,IACnQA,EAiHT,OA9GA,YAAaJ,EAAG,CAAC,CACfY,IAAK,aACLC,MAAO,WACLjB,KAAKkB,mBAAmBlB,KAAKmB,eAAgBnB,KAAKoB,SAAUpB,KAAKqB,MAAM,UAAWrB,KAAKsB,gBAAgBP,KAAKf,OAAO,KAEpH,CACDgB,IAAK,eACLC,MAAO,SAAsBV,EAAGZ,EAAG4B,EAAGC,GACpC,IAAIC,EAAI,GACR,IAAKlB,EAAG,OAAOkB,EACflB,EAAEmB,SAAQ,SAAUnB,GAClB,IAAIZ,EAAI,YAAEY,EAAGiB,EAAEG,OAASH,EAAEG,OAAOC,6BAA6BrB,GAAK,KAAMiB,GACzE,YAAE7B,IAAMA,EAAEkC,WAAaJ,EAAEK,KAAKnC,MAC5BA,EAAEoC,OAASN,IAEhB,CACDT,IAAK,aACLgB,IAAK,SAAazB,GAChBP,KAAKiC,KAAK,aAAc1B,KAEzB,CACDS,IAAK,iBACLgB,IAAK,SAAazB,GAChB,IAAIZ,EAAIK,KAAKkC,KAAK,oBAAsB3B,EACxCP,KAAKiC,KAAK,iBAAkB1B,GAAIZ,GAAKK,KAAKkB,mBAAmBX,EAAGP,KAAKoB,WAEtE,CACDJ,IAAK,OACLC,MAAO,SAAcV,GACnB,OAAOP,KAAKmC,oBAAoBnC,KAAKoC,eAAe,CAClDC,eAAgB,CAAC,kBAAmB,qBAAsB,kBACzD9B,IAAK+B,QAAQC,QAAQvC,QAEzB,CACDgB,IAAK,UACLC,MAAO,WACL,IAAIuB,EAASxC,KAEb,OAAO,YAAEA,MAAM,SAAUO,GACvBA,EAAEiC,EAAOT,aAGZ,CACDf,IAAK,aACLC,MAAO,SAAoBV,GACzBA,EAAEa,SAAW,cAAgBpB,KAAKmB,eAAiBnB,KAAKyC,oBAAoBlC,GAAK,cAAgBP,KAAKmB,iBAAmBZ,EAAEa,QAAUpB,KAAKoB,SAAUpB,KAAKS,mBAAmBF,EAAEmC,KAAOnC,EAAEc,MAAM,UAAWrB,KAAKc,oBAAoB,KAElO,CACDE,IAAK,eACLC,MAAO,SAAsBV,GAC3B,IAAIZ,EAAIK,KAAKS,mBAAmBF,EAAEmC,KAClC/C,IAAMA,EAAEgD,gBAAiB3C,KAAKS,mBAAmBF,EAAEmC,MAAO1C,KAAKkB,mBAAmBlB,KAAKmB,eAAgBnB,KAAKoB,WAE7G,CACDJ,IAAK,sBACLC,MAAO,SAA6BV,GAClCP,KAAK+B,OAAOL,SAAQ,SAAU/B,GAC5BA,IAAMY,IAAMZ,EAAEyB,SAAU,QAG3B,CACDJ,IAAK,qBACLC,MAAO,SAA4BV,EAAGZ,GACpC,GAAK,YAAEK,MAAM4C,YAAb,CACA,IAAIC,EAAI7C,KAAK+B,OACTR,EAAIsB,EAAEC,MAAK,SAAUvC,GACvB,OAAOA,EAAEa,WAGX,OAAQb,GACN,IAAK,YACHsC,EAAEE,SAAWxB,KAAMA,EAAIsB,EAAEG,UAAU,IAAM5B,SAAU,GAAKpB,KAAKyC,oBAAoBlB,GACjF,MAEF,IAAK,YACHsB,EAAEnB,SAAQ,SAAUnB,GAClBA,EAAEa,QAAUzB,SAInB,CACDqB,IAAK,kBACLC,MAAO,SAAyBV,GAC9B,cAAgBP,KAAKmB,gBAAkBnB,KAAK+B,OAAOL,SAAQ,SAAU/B,GACnEA,EAAEyB,QAAUb,OAGf,CACDS,IAAK,qBACLC,MAAO,SAA4BV,EAAGZ,EAAGkD,EAAGtB,GAC1C,IAAIC,EAAID,EAER,OAAQvB,KAAKmB,gBACX,IAAK,YACHZ,EAAIP,KAAKyC,oBAAoBjB,GAAKxB,KAAKiD,uBAAyBzB,EAAEJ,SAAU,GAC5E,MAEF,IAAK,YACHI,EAAEJ,QAAUpB,KAAKoB,WAGtB,CACDJ,IAAK,qBACLC,MAAO,WACL,OAAOjB,KAAK+B,OAAOmB,MAAK,SAAU3C,GAChC,OAAOA,EAAEa,eAKRhB,EA5HY,CA6HnB,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAEhB,YAAE,CAAC,eAAMA,EAAEZ,UAAW,kBAAc,GAAS,YAAE,CAAC,YAAE,CAChD2D,KAAM,CACJC,MAAM,EACNC,MAAO,CACLC,cAAc,OAGflD,EAAEZ,UAAW,cAAU,GAAS,YAAE,CAAC,YAAE,WAAYY,EAAEZ,UAAW,eAAgB,MAAO,YAAE,CAAC,YAAE,CAC7FqB,KAAM,CAAC,iBACJT,EAAEZ,UAAW,4BAAwB,GAAS,YAAE,CAAC,YAAE,CACtD2D,KAAM,CACJI,QAAS,CACP,eAAgB,CACdH,MAAM,EACNC,OAAO,QAIVjD,EAAEZ,UAAW,aAAc,MAAO,YAAE,CAAC,eAAMY,EAAEZ,UAAW,wBAAoB,GAAS,YAAE,CAAC,YAAE,CAC7F2D,KAAM,CACJC,MAAM,GAERI,UAAU,EACVvC,MAAO,WACJb,EAAEZ,UAAW,YAAQ,GAAS,YAAE,CAAC,YAAE,CACtCqB,KAAM,CAAC,cAAe,YAAa,aACnCI,MAAO,cACPkC,KAAM,CACJE,OAAO,EACPE,QAAS,CACP,UAAW,CACTH,MAAM,EACNC,OAAO,QAIVjD,EAAEZ,UAAW,iBAAkB,MACpC,IAAIiE,EADuCrD,EAAI,YAAE,CAAC,YAAE,2BAA4BA,GAEjE","file":"21-fb8ba401732ab74b1e95.js","sourcesContent":["import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as i } from \"../chunks/tslib.es6.js\";\nimport { loadAll as e } from \"../core/loadAll.js\";\nimport { isSome as t } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as s } from \"../core/MultiOriginJSONSupport.js\";\nimport { property as r } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport { getProperties as o } from \"../core/accessorSupport/utils.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { subclass as l } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { writer as a } from \"../core/accessorSupport/decorators/writer.js\";\nimport p from \"./Layer.js\";\nimport { BlendLayer as n } from \"./mixins/BlendLayer.js\";\nimport { OperationalLayer as y } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as h } from \"./mixins/PortalLayer.js\";\nimport { ScaleRangeLayer as c } from \"./mixins/ScaleRangeLayer.js\";\nimport { LayersMixin as d } from \"../support/LayersMixin.js\";\nimport { TablesMixin as v } from \"../support/TablesMixin.js\";\nimport { getLayerJSON as b } from \"../webdoc/support/writeUtils.js\";\n\nvar m = /*#__PURE__*/function (_n) {\n  _inherits(m, _n);\n\n  var _super = _createSuper(m);\n\n  function m(i) {\n    var _this;\n\n    _classCallCheck(this, m);\n\n    _this = _super.call(this, i), _this._visibilityHandles = {}, _this.fullExtent = void 0, _this.operationalLayerType = \"GroupLayer\", _this.spatialReference = void 0, _this.type = \"group\", _this._visibilityWatcher = _this._visibilityWatcher.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(m, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this._enforceVisibility(this.visibilityMode, this.visible), this.watch(\"visible\", this._visibleWatcher.bind(this), !0);\n    }\n  }, {\n    key: \"_writeLayers\",\n    value: function _writeLayers(i, e, s, r) {\n      var o = [];\n      if (!i) return o;\n      i.forEach(function (i) {\n        var e = b(i, r.webmap ? r.webmap.getLayerJSONFromResourceInfo(i) : null, r);\n        t(e) && e.layerType && o.push(e);\n      }), e.layers = o;\n    }\n  }, {\n    key: \"portalItem\",\n    set: function set(i) {\n      this._set(\"portalItem\", i);\n    }\n  }, {\n    key: \"visibilityMode\",\n    set: function set(i) {\n      var e = this._get(\"visibilityMode\") !== i;\n      this._set(\"visibilityMode\", i), e && this._enforceVisibility(i, this.visible);\n    }\n  }, {\n    key: \"load\",\n    value: function load(i) {\n      return this.addResolvingPromise(this.loadFromPortal({\n        supportedTypes: [\"Feature Service\", \"Feature Collection\", \"Scene Service\"]\n      }, i)), Promise.resolve(this);\n    }\n  }, {\n    key: \"loadAll\",\n    value: function loadAll() {\n      var _this2 = this;\n\n      return e(this, function (i) {\n        i(_this2.layers);\n      });\n    }\n  }, {\n    key: \"layerAdded\",\n    value: function layerAdded(i) {\n      i.visible && \"exclusive\" === this.visibilityMode ? this._turnOffOtherLayers(i) : \"inherited\" === this.visibilityMode && (i.visible = this.visible), this._visibilityHandles[i.uid] = i.watch(\"visible\", this._visibilityWatcher, !0);\n    }\n  }, {\n    key: \"layerRemoved\",\n    value: function layerRemoved(i) {\n      var e = this._visibilityHandles[i.uid];\n      e && (e.remove(), delete this._visibilityHandles[i.uid]), this._enforceVisibility(this.visibilityMode, this.visible);\n    }\n  }, {\n    key: \"_turnOffOtherLayers\",\n    value: function _turnOffOtherLayers(i) {\n      this.layers.forEach(function (e) {\n        e !== i && (e.visible = !1);\n      });\n    }\n  }, {\n    key: \"_enforceVisibility\",\n    value: function _enforceVisibility(i, e) {\n      if (!o(this).initialized) return;\n      var t = this.layers;\n      var s = t.find(function (i) {\n        return i.visible;\n      });\n\n      switch (i) {\n        case \"exclusive\":\n          t.length && !s && (s = t.getItemAt(0), s.visible = !0), this._turnOffOtherLayers(s);\n          break;\n\n        case \"inherited\":\n          t.forEach(function (i) {\n            i.visible = e;\n          });\n      }\n    }\n  }, {\n    key: \"_visibleWatcher\",\n    value: function _visibleWatcher(i) {\n      \"inherited\" === this.visibilityMode && this.layers.forEach(function (e) {\n        e.visible = i;\n      });\n    }\n  }, {\n    key: \"_visibilityWatcher\",\n    value: function _visibilityWatcher(i, e, t, s) {\n      var r = s;\n\n      switch (this.visibilityMode) {\n        case \"exclusive\":\n          i ? this._turnOffOtherLayers(r) : this._isAnyLayerVisible() || (r.visible = !0);\n          break;\n\n        case \"inherited\":\n          r.visible = this.visible;\n      }\n    }\n  }, {\n    key: \"_isAnyLayerVisible\",\n    value: function _isAnyLayerVisible() {\n      return this.layers.some(function (i) {\n        return i.visible;\n      });\n    }\n  }]);\n\n  return m;\n}(n(c(y(h(v(d(s(p))))))));\n\ni([r()], m.prototype, \"fullExtent\", void 0), i([r({\n  json: {\n    read: !1,\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], m.prototype, \"layers\", void 0), i([a(\"layers\")], m.prototype, \"_writeLayers\", null), i([r({\n  type: [\"GroupLayer\"]\n})], m.prototype, \"operationalLayerType\", void 0), i([r({\n  json: {\n    origins: {\n      \"web-document\": {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], m.prototype, \"portalItem\", null), i([r()], m.prototype, \"spatialReference\", void 0), i([r({\n  json: {\n    read: !1\n  },\n  readOnly: !0,\n  value: \"group\"\n})], m.prototype, \"type\", void 0), i([r({\n  type: [\"independent\", \"inherited\", \"exclusive\"],\n  value: \"independent\",\n  json: {\n    write: !0,\n    origins: {\n      \"web-map\": {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], m.prototype, \"visibilityMode\", null), m = i([l(\"esri.layers.GroupLayer\")], m);\nvar u = m;\nexport default u;"],"sourceRoot":""}